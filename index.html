<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ESC v2.3 | Interactive Mockup</title>
    
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" as="style" crossorigin href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/static/pretendard.css" />
    
    <!-- React & ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    
    <!-- Babel -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'esc-bg': '#050505',
                        'esc-panel': '#0A0A0A',
                        'esc-green': '#00FF41', // Terminal / User
                        'esc-cyan': '#00E5FF',  // System / AI
                        'esc-red': '#FF3333',   // Error
                    },
                    fontFamily: {
                        mono: ['JetBrains Mono', 'monospace'],
                        sans: ['Pretendard', 'sans-serif'],
                    },
                    animation: {
                        'blink': 'blink 1s step-end infinite',
                        'scanline': 'scanline 8s linear infinite',
                    },
                    keyframes: {
                        blink: {
                            '0%, 100%': { opacity: '1' },
                            '50%': { opacity: '0' },
                        }
                    }
                }
            }
        }
    </script>
    
    <style>
        body {
            background-color: #050505;
            color: white;
            overflow: hidden; /* Prevent body scroll for app-like feel */
        }
        
        /* Glassmorphism Utilities */
        .glass-panel {
            background: rgba(20, 20, 20, 0.6);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.08);
            box-shadow: 0 4px 30px rgba(0, 0, 0, 0.5);
        }
        
        .glass-keycap {
            background: linear-gradient(145deg, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0.02) 100%);
            border: 1px solid rgba(255,255,255,0.2);
            box-shadow: 
                0 0 15px rgba(0, 255, 65, 0.2),
                inset 0 0 10px rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(4px);
        }

        /* Scrollbar */
        ::-webkit-scrollbar {
            width: 6px;
        }
        ::-webkit-scrollbar-track {
            background: #0A0A0A;
        }
        ::-webkit-scrollbar-thumb {
            background: #333;
            border-radius: 3px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #00FF41;
        }

        /* Scanline Effect */
        .scanlines {
            background: linear-gradient(
                to bottom,
                rgba(255,255,255,0),
                rgba(255,255,255,0) 50%,
                rgba(0,0,0,0.1) 50%,
                rgba(0,0,0,0.1)
            );
            background-size: 100% 4px;
            position: fixed;
            top: 0; left: 0; right: 0; bottom: 0;
            pointer-events: none;
            z-index: 50;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;
        
        // --- Icons (Inline SVGs to fix Lucide CDN issues) ---
        const Terminal = (props) => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><polyline points="4 17 10 11 4 5"></polyline><line x1="12" y1="19" x2="20" y2="19"></line></svg>
        );
        const Lock = (props) => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect><path d="M7 11V7a5 5 0 0 1 10 0v4"></path></svg>
        );
        const ChevronRight = (props) => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><polyline points="9 18 15 12 9 6"></polyline></svg>
        );
        const User = (props) => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path><circle cx="12" cy="7" r="4"></circle></svg>
        );
        const ShieldAlert = (props) => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"></path><line x1="12" y1="8" x2="12" y2="12"></line><line x1="12" y1="16" x2="12.01" y2="16"></line></svg>
        );
        const Cpu = (props) => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><rect x="4" y="4" width="16" height="16" rx="2" ry="2"></rect><rect x="9" y="9" width="6" height="6"></rect><line x1="9" y1="1" x2="9" y2="4"></line><line x1="15" y1="1" x2="15" y2="4"></line><line x1="9" y1="20" x2="9" y2="23"></line><line x1="15" y1="20" x2="15" y2="23"></line><line x1="20" y1="9" x2="23" y2="9"></line><line x1="20" y1="14" x2="23" y2="14"></line><line x1="1" y1="9" x2="4" y2="9"></line><line x1="1" y1="14" x2="4" y2="14"></line></svg>
        );
        const Send = (props) => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><line x1="22" y1="2" x2="11" y2="13"></line><polygon points="22 2 15 22 11 13 2 9 22 2"></polygon></svg>
        );
        const LogOut = (props) => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path><polyline points="16 17 21 12 16 7"></polyline><line x1="21" y1="12" x2="9" y2="12"></line></svg>
        );

        // --- Mock Data ---
        const MOCK_LOGS = [
            { type: 'SYSTEM', text: 'CONNECTING TO SECURE SERVER...' },
            { type: 'SYSTEM', text: 'HANDSHAKE ESTABLISHED. ENCRYPTION: AES-256' },
            { type: 'INFO', text: 'CASE ID: #2026-02-13-X9' },
            { type: 'INFO', text: 'STATUS: ACTIVE INVESTIGATION' },
            { type: 'USER', text: '> look around' },
            { type: 'GAME', text: 'You are standing in a dimly lit server room. Rows of racks hum with a low vibration. A single terminal in the corner is blinking green.' },
        ];

        // --- Components ---

        // 1. Landing Screen
        const LandingScreen = ({ onJoin }) => {
            return (
                <div className="h-screen w-full flex flex-col items-center justify-center relative bg-[radial-gradient(ellipse_at_center,_var(--tw-gradient-stops))] from-gray-900 via-esc-bg to-esc-bg">
                    
                    {/* Hero Graphic: Glass Keycap */}
                    <div className="mb-12 relative group cursor-default">
                        <div className="absolute -inset-1 bg-esc-green rounded-2xl blur opacity-20 group-hover:opacity-40 transition duration-1000"></div>
                        <div className="glass-keycap w-32 h-32 rounded-2xl flex items-center justify-center relative transform transition-transform group-hover:scale-105 duration-300">
                            <span className="font-mono text-4xl font-bold text-esc-green drop-shadow-[0_0_10px_rgba(0,255,65,0.8)]">ESC</span>
                        </div>
                    </div>

                    {/* Headline */}
                    <div className="text-center space-y-4 mb-10 z-10">
                        <h1 className="text-5xl md:text-6xl font-bold tracking-tighter text-white">
                            PRESS <span className="text-esc-green">[ESC]</span>
                        </h1>
                        <p className="text-gray-400 font-mono text-sm tracking-[0.2em] uppercase">
                            The Only Way Out Is Through
                        </p>
                    </div>

                    {/* Terminal Input Form */}
                    <div className="w-full max-w-md glass-panel p-1 rounded-xl">
                        <div className="bg-esc-bg/80 rounded-lg p-6 space-y-4">
                            <div className="flex items-center space-x-2 text-xs font-mono text-gray-500 mb-2">
                                <Lock size={12} />
                                <span>SECURE_GATEWAY_V2.3</span>
                            </div>
                            
                            <div className="space-y-1">
                                <label className="text-esc-green text-xs font-mono pl-1">ENTER_ACCESS_KEY_</label>
                                <div className="relative">
                                    <input 
                                        type="text" 
                                        placeholder="user@esc.live"
                                        className="w-full bg-transparent border-b border-gray-700 py-2 pl-2 pr-10 text-white font-mono focus:outline-none focus:border-esc-green transition-colors placeholder-gray-800"
                                    />
                                    <div className="absolute right-0 top-2 animate-blink w-2 h-5 bg-esc-green"></div>
                                </div>
                            </div>

                            <button 
                                onClick={onJoin}
                                className="w-full mt-4 bg-esc-green/10 border border-esc-green/50 hover:bg-esc-green hover:text-black text-esc-green font-mono font-bold py-3 rounded transition-all duration-200 flex items-center justify-center gap-2 group"
                            >
                                <span>JOIN_QUEUE</span>
                                <ChevronRight size={16} className="group-hover:translate-x-1 transition-transform"/>
                            </button>
                        </div>
                    </div>

                    <div className="absolute bottom-8 text-xs text-gray-600 font-mono">
                        WAITLIST_STATUS: <span className="text-esc-green">OPEN</span> | SYSTEM: ONLINE
                    </div>
                </div>
            );
        };

        // 2. Dashboard (Home) Screen
        const DashboardScreen = ({ onEnterRun, onLogout }) => {
            return (
                <div className="min-h-screen bg-esc-bg p-4 md:p-8 font-sans">
                    {/* Navbar */}
                    <nav className="flex justify-between items-center mb-10">
                        <div className="flex items-center gap-3">
                            <div className="glass-keycap w-10 h-10 rounded flex items-center justify-center">
                                <span className="text-esc-green font-bold text-sm">ESC</span>
                            </div>
                            <div className="hidden md:block">
                                <div className="text-white font-bold text-sm">OPERATOR_ID: #4092</div>
                                <div className="text-gray-500 text-xs font-mono">ACCESS_LEVEL: GRANTED</div>
                            </div>
                        </div>
                        <div className="flex items-center gap-4">
                            <div className="flex items-center gap-2 px-3 py-1 rounded-full border border-esc-cyan/30 bg-esc-cyan/5 text-esc-cyan text-xs font-mono">
                                <Cpu size={12} />
                                <span>TOKENS: 42</span>
                            </div>
                             <button onClick={onLogout} className="text-gray-500 hover:text-white transition-colors">
                                <LogOut size={20} />
                            </button>
                        </div>
                    </nav>

                    <main className="max-w-4xl mx-auto space-y-8">
                        {/* Section Header */}
                        <div className="flex items-end justify-between border-b border-gray-800 pb-2">
                            <h2 className="text-2xl font-bold text-white tracking-tight">TODAY'S INCIDENT</h2>
                            <span className="font-mono text-esc-green text-sm">2026-02-13</span>
                        </div>

                        {/* Main Incident Card */}
                        <div className="glass-panel rounded-2xl p-1 relative overflow-hidden group">
                            <div className="absolute top-0 right-0 p-4 opacity-50">
                                <ShieldAlert size={120} className="text-gray-800 rotate-12" />
                            </div>
                            
                            <div className="bg-esc-panel/90 rounded-xl p-6 md:p-10 relative z-10">
                                <div className="flex flex-col md:flex-row justify-between items-start md:items-center gap-6">
                                    <div className="space-y-4">
                                        <div className="flex items-center gap-2">
                                            <span className="bg-esc-green text-black text-xs font-bold px-2 py-0.5 rounded">OPEN</span>
                                            <span className="text-esc-green text-xs font-mono border border-esc-green/30 px-2 py-0.5 rounded">DIFFICULTY: HARD</span>
                                        </div>
                                        <div>
                                            <h3 className="text-3xl md:text-4xl font-bold text-white mb-2">The Midnight Server Room</h3>
                                            <p className="text-gray-400 max-w-lg">
                                                서버실의 온도가 급격히 상승하고 있습니다. 관리자 계정은 잠겼고, 백업 시스템은 응답하지 않습니다. 
                                                유일한 단서는 남겨진 시스템 로그뿐입니다.
                                            </p>
                                        </div>
                                        
                                        {/* Progress Bar */}
                                        <div className="space-y-2 max-w-sm">
                                            <div className="flex justify-between text-xs font-mono text-gray-500">
                                                <span>SEATS_TAKEN</span>
                                                <span className="text-white">1,402 / 2,000</span>
                                            </div>
                                            <div className="h-1.5 w-full bg-gray-800 rounded-full overflow-hidden">
                                                <div className="h-full bg-esc-green w-[70%]"></div>
                                            </div>
                                        </div>
                                    </div>

                                    <div className="w-full md:w-auto">
                                        <button 
                                            onClick={onEnterRun}
                                            className="w-full md:w-48 bg-esc-green hover:bg-[#33FF66] text-black font-mono font-bold py-4 rounded-lg shadow-[0_0_20px_rgba(0,255,65,0.3)] hover:shadow-[0_0_30px_rgba(0,255,65,0.6)] transition-all duration-300 transform hover:-translate-y-1"
                                        >
                                            ENTER_RUN
                                        </button>
                                        <div className="mt-3 text-center text-xs text-gray-500 font-mono">
                                            EST. TIME: 12 MIN
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        {/* Secondary Stats Row */}
                        <div className="grid grid-cols-1 md:grid-cols-3 gap-4">
                            <div className="glass-panel p-6 rounded-xl border border-gray-800 hover:border-esc-cyan/50 transition-colors">
                                <div className="text-gray-500 text-xs font-mono mb-1">GLOBAL_SOLVE_RATE</div>
                                <div className="text-2xl font-bold text-white">42.8%</div>
                            </div>
                            <div className="glass-panel p-6 rounded-xl border border-gray-800 hover:border-esc-green/50 transition-colors">
                                <div className="text-gray-500 text-xs font-mono mb-1">MY_RANKING</div>
                                <div className="text-2xl font-bold text-white">Top 5%</div>
                            </div>
                            <div className="glass-panel p-6 rounded-xl border border-gray-800 hover:border-white/20 transition-colors flex items-center justify-between cursor-pointer">
                                <div>
                                    <div className="text-gray-500 text-xs font-mono mb-1">COLLECTION</div>
                                    <div className="text-white font-bold">View Artifacts</div>
                                </div>
                                <ChevronRight className="text-gray-600" />
                            </div>
                        </div>
                    </main>
                </div>
            );
        };

        // 3. Gameplay Screen
        const GameplayScreen = ({ onExit }) => {
            const bottomRef = useRef(null);
            
            useEffect(() => {
                bottomRef.current?.scrollIntoView({ behavior: 'smooth' });
            }, []);

            return (
                <div className="h-screen w-full bg-black flex flex-col md:flex-row overflow-hidden relative">
                    {/* Scanlines Overlay */}
                    <div className="scanlines z-50 pointer-events-none"></div>

                    {/* LEFT: Main Terminal (66%) */}
                    <div className="flex-1 flex flex-col border-r border-gray-800 relative z-10">
                        {/* Terminal Header */}
                        <div className="h-12 border-b border-gray-800 flex items-center justify-between px-4 bg-esc-panel">
                            <div className="flex items-center gap-2">
                                <div className="w-3 h-3 rounded-full bg-red-500/20 border border-red-500"></div>
                                <div className="w-3 h-3 rounded-full bg-yellow-500/20 border border-yellow-500"></div>
                                <div className="w-3 h-3 rounded-full bg-green-500/20 border border-green-500"></div>
                                <span className="ml-2 text-xs font-mono text-gray-500">RUN_ID: 2390-AF</span>
                            </div>
                            <button onClick={onExit} className="text-xs text-esc-red hover:underline font-mono">
                                [ABORT_SESSION]
                            </button>
                        </div>

                        {/* Terminal Logs Area */}
                        <div className="flex-1 p-6 font-mono text-sm overflow-y-auto space-y-3 scrollbar-hide">
                            {MOCK_LOGS.map((log, idx) => (
                                <div key={idx} className={`${log.type === 'USER' ? 'text-white font-bold mt-6' : log.type === 'GAME' ? 'text-gray-300 leading-relaxed' : 'text-esc-green/70'}`}>
                                    {log.type === 'SYSTEM' && <span className="mr-2">[SYS]</span>}
                                    {log.type === 'INFO' && <span className="mr-2 text-blue-400">[INF]</span>}
                                    {log.text}
                                </div>
                            ))}
                            <div ref={bottomRef}></div>
                        </div>

                        {/* Input Area */}
                        <div className="h-16 border-t border-gray-800 bg-black p-4 flex items-center">
                            <span className="text-esc-green mr-2 font-mono text-lg">{'>'}</span>
                            <input 
                                type="text" 
                                autoFocus
                                className="flex-1 bg-transparent border-none outline-none text-white font-mono text-lg placeholder-gray-800"
                                placeholder="Enter command..."
                            />
                            <div className="animate-blink w-2.5 h-5 bg-esc-green ml-1"></div>
                        </div>
                    </div>

                    {/* RIGHT: Copilot / Reasoning Engine (33%) */}
                    <div className="w-full md:w-[350px] bg-[#080808] border-l border-gray-800 flex flex-col z-20 shadow-[-10px_0_30px_rgba(0,0,0,0.5)]">
                        {/* Copilot Header */}
                        <div className="h-12 border-b border-gray-800 flex items-center justify-between px-4 bg-esc-panel">
                            <div className="flex items-center gap-2 text-esc-cyan">
                                <Cpu size={14} />
                                <span className="text-xs font-mono font-bold tracking-wider">COPILOT_V2.3</span>
                            </div>
                            <div className="text-[10px] font-mono text-gray-600">TOKEN_COST: 2</div>
                        </div>

                        {/* Copilot Chat */}
                        <div className="flex-1 p-4 space-y-4 overflow-y-auto font-sans text-sm">
                            <div className="flex gap-3">
                                <div className="w-6 h-6 rounded bg-esc-cyan/10 flex items-center justify-center shrink-0 mt-1">
                                    <Cpu size={12} className="text-esc-cyan" />
                                </div>
                                <div className="bg-esc-cyan/5 border border-esc-cyan/10 rounded-lg rounded-tl-none p-3 text-gray-300">
                                    현재 상황을 분석했습니다. 서버실 온도가 임계치에 도달했습니다. 
                                    <br/><br/>
                                    <span className="text-esc-cyan">Hint:</span> 냉각 시스템의 전원 제어판을 먼저 찾아보세요. 'check power' 명령어가 유효할 수 있습니다.
                                </div>
                            </div>

                            <div className="flex gap-3 flex-row-reverse">
                                <div className="w-6 h-6 rounded bg-gray-800 flex items-center justify-center shrink-0 mt-1">
                                    <User size={12} className="text-white" />
                                </div>
                                <div className="bg-gray-800 rounded-lg rounded-tr-none p-3 text-white">
                                    전원 제어판이 어디 있지?
                                </div>
                            </div>
                            
                            <div className="flex justify-center my-4">
                                <span className="text-[10px] text-gray-700 font-mono">--- REASONING IN PROGRESS ---</span>
                            </div>
                        </div>

                        {/* Copilot Input */}
                        <div className="p-4 border-t border-gray-800 bg-esc-panel">
                            <div className="relative">
                                <input 
                                    type="text" 
                                    placeholder="Ask for a hint..."
                                    className="w-full bg-black border border-gray-700 rounded-lg py-2 pl-3 pr-10 text-xs text-white focus:border-esc-cyan focus:outline-none transition-colors"
                                />
                                <button className="absolute right-2 top-2 text-gray-500 hover:text-esc-cyan">
                                    <Send size={14} />
                                </button>
                            </div>
                            <div className="mt-2 flex justify-between items-center">
                                <span className="text-[10px] text-gray-500">LEVEL 1 HINT</span>
                                <div className="flex gap-1">
                                    <div className="w-1.5 h-1.5 rounded-full bg-esc-cyan"></div>
                                    <div className="w-1.5 h-1.5 rounded-full bg-gray-700"></div>
                                    <div className="w-1.5 h-1.5 rounded-full bg-gray-700"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            );
        };

        // --- Main App Controller ---
        const App = () => {
            const [currentView, setCurrentView] = useState('LANDING'); // LANDING -> HOME -> GAME

            return (
                <div className="antialiased">
                    <style>{`
                        .text-esc-green { color: #00FF41; }
                        .bg-esc-green { background-color: #00FF41; }
                        .border-esc-green { border-color: #00FF41; }
                        
                        .text-esc-cyan { color: #00E5FF; }
                        .bg-esc-cyan { background-color: #00E5FF; }
                        .border-esc-cyan { border-color: #00E5FF; }
                        
                        .text-esc-red { color: #FF3333; }
                        
                        .bg-esc-bg { background-color: #050505; }
                        .bg-esc-panel { background-color: #0A0A0A; }
                    `}</style>

                    {currentView === 'LANDING' && <LandingScreen onJoin={() => setCurrentView('HOME')} />}
                    {currentView === 'HOME' && <DashboardScreen onEnterRun={() => setCurrentView('GAME')} onLogout={() => setCurrentView('LANDING')} />}
                    {currentView === 'GAME' && <GameplayScreen onExit={() => setCurrentView('HOME')} />}
                    
                    {/* View Switcher for Demo Purposes */}
                    <div className="fixed bottom-2 right-2 z-50 opacity-20 hover:opacity-100 transition-opacity">
                        <select 
                            value={currentView} 
                            onChange={(e) => setCurrentView(e.target.value)}
                            className="bg-black text-white text-xs border border-gray-700 rounded p-1"
                        >
                            <option value="LANDING">View: Landing</option>
                            <option value="HOME">View: Home</option>
                            <option value="GAME">View: Gameplay</option>
                        </select>
                    </div>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
